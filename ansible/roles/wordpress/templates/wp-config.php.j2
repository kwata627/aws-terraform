<?php
/**
 * WordPress基本設定ファイル
 * 
 * このファイルはWordPressの基本設定を含みます。
 * データベース接続情報、認証キー、その他の設定が含まれています。
 */

// =============================================================================
// データベース設定
// =============================================================================

/** WordPressデータベース名 */
define( 'DB_NAME', '{{ wp_db_name | default('wordpress') }}' );

/** MySQLデータベースユーザー名 */
define( 'DB_USER', '{{ wp_db_user | default('wordpress') }}' );

/** MySQLデータベースパスワード */
define( 'DB_PASSWORD', '{{ wp_db_password | default(lookup('env', 'WORDPRESS_DB_PASSWORD') | default('your-secure-password-here')) }}' );

/** MySQLホスト名 */
define( 'DB_HOST', '{{ wp_db_host | default('localhost') }}' );

/** データベース文字セット */
define( 'DB_CHARSET', 'utf8mb4' );

/** データベース照合順序 */
define( 'DB_COLLATE', 'utf8mb4_unicode_ci' );

// =============================================================================
// 認証用ユニークキー
// =============================================================================

/**#@+
 * 認証用ユニークキーとソルト
 *
 * 後でそれぞれをユニークな（推測不可能な）文字列に変更してください。
 * {@link https://api.wordpress.org/secret-key/1.1/salt/ WordPress.org の秘密鍵サービス} で自動生成することもできます。
 *
 * 後でいつでも変更して、既存のすべての cookie を無効にできます。
 * これにより、すべてのユーザーを強制的に再ログインさせることになります。
 *
 * @since 2.6.0
 */
define( 'AUTH_KEY',         '{{ wp_auth_key | default('put your unique phrase here') }}' );
define( 'SECURE_AUTH_KEY',  '{{ wp_secure_auth_key | default('put your unique phrase here') }}' );
define( 'LOGGED_IN_KEY',    '{{ wp_logged_in_key | default('put your unique phrase here') }}' );
define( 'NONCE_KEY',        '{{ wp_nonce_key | default('put your unique phrase here') }}' );
define( 'AUTH_SALT',        '{{ wp_auth_salt | default('put your unique phrase here') }}' );
define( 'SECURE_AUTH_SALT', '{{ wp_secure_auth_salt | default('put your unique phrase here') }}' );
define( 'LOGGED_IN_SALT',   '{{ wp_logged_in_salt | default('put your unique phrase here') }}' );
define( 'NONCE_SALT',       '{{ wp_nonce_salt | default('put your unique phrase here') }}' );

/**#@-*/

// =============================================================================
// WordPress設定
// =============================================================================

/** WordPress データベーステーブルの接頭辞 */
$table_prefix = '{{ wp_table_prefix | default('wp_') }}';

/** 開発者へ: WordPress デバッグモード
 *
 * この値を true にすると、開発中に注意 (notice) を表示します。
 * テーマおよびプラグインの開発者には、その開発環境においてこの WP_DEBUG を使用することを強く推奨します。
 *
 * その他のデバッグに利用できる定数についてはドキュメンテーションをご覧ください。
 *
 * @link https://ja.wordpress.org/support/article/debugging-in-wordpress/
 */
define( 'WP_DEBUG', {{ wp_debug | default(false) | lower }} );

// =============================================================================
// サイトURL設定（CloudFront対応）
// =============================================================================

/** WordPress のホームURL */
define( 'WP_HOME', 'https://{{ wordpress_domain | default('example.com') }}' );

/** WordPress のサイトURL */
define( 'WP_SITEURL', 'https://{{ wordpress_domain | default('example.com') }}' );

// =============================================================================
// 管理画面URL設定（直接アクセス用）
// =============================================================================

/** 管理画面のURL（直接アクセス推奨） */
define( 'WP_ADMIN_URL', 'https://admin.{{ wordpress_domain | default('example.com') }}' );

// =============================================================================
// SSL設定
// =============================================================================

/** 管理画面を強制的にSSLでアクセス */
define( 'FORCE_SSL_ADMIN', {{ wp_force_ssl_admin | default(true) | lower }} );

/** ログインを強制的にSSLでアクセス */
define( 'FORCE_SSL_LOGIN', {{ wp_force_ssl_login | default(true) | lower }} );

/** キャッシュを無効化 */
define( 'WP_CACHE', {{ wp_cache_enabled | default(false) | lower }} );

// =============================================================================
// CloudFront HTTPS 検出
// =============================================================================
if ( isset( $_SERVER["HTTP_X_FORWARDED_PROTO"] ) && $_SERVER["HTTP_X_FORWARDED_PROTO"] === "https" ) {
    $_SERVER["HTTPS"] = "on";
}

// =============================================================================
// 言語設定
// =============================================================================

/** 言語設定 */
define( 'WPLANG', '{{ wp_lang | default('ja') }}' );

// =============================================================================
// 自動更新設定
// =============================================================================

/** 自動更新を無効化 */
define( 'AUTOMATIC_UPDATER_DISABLED', {{ wp_automatic_updater_disabled | default(true) | lower }} );

/** ファイル編集を無効化 */
define( 'DISALLOW_FILE_EDIT', {{ wp_disallow_file_edit | default(true) | lower }} );

/** ファイル修正を無効化 */
define( 'DISALLOW_FILE_MODS', {{ wp_disallow_file_mods | default(false) | lower }} );

// =============================================================================
// メモリ制限
// =============================================================================

/** WordPress のメモリ制限 */
define( 'WP_MEMORY_LIMIT', '{{ wp_memory_limit | default('256M') }}' );

/** 管理画面のメモリ制限 */
define( 'WP_MAX_MEMORY_LIMIT', '{{ wp_max_memory_limit | default('512M') }}' );

// =============================================================================
// その他の設定
// =============================================================================

/** リビジョン数を制限 */
define( 'WP_POST_REVISIONS', {{ wp_post_revisions | default(5) }} );

/** 自動保存の間隔（秒） */
define( 'AUTOSAVE_INTERVAL', {{ wp_autosave_interval | default(300) }} );

/** ゴミ箱の空にするまでの日数 */
define( 'EMPTY_TRASH_DAYS', {{ wp_empty_trash_days | default(30) }} );

// =============================================================================
// 絶対パス
// =============================================================================

/** WordPress ディレクトリへの絶対パス */
if ( ! defined( 'ABSPATH' ) ) {
    define( 'ABSPATH', __DIR__ . '/' );
}

// =============================================================================
// WordPress の読み込み
// =============================================================================

/** WordPress の設定とテンプレートファイルを読み込む */
require_once ABSPATH . 'wp-settings.php'; 