# AWS Terrafrom WordPress IaC構築

## 概要

AWS上にTerraformを用いてWordPressブログ環境をIaCとして構築し、インフラの自動化（効率化）について学習する。

## 目的

* Terraformを用いたAWSインフラ構築について学ぶ
* IaCのベストプラクティスについて学ぶ(モジュール化、変数管理など)
* 複数のAWSサービスをIaCで連携させる。
* WordPressの自動デプロイと初期設定の自動化を体験
* 自身のポートフォリオとしての活用

## 構成案

```
+--------------------+
|  Route53     | ← 独自ドメイン管理（example.com）
+--------------------+
      |
      ▼
+--------------------+
|  CloudFront    | ← 静的ファイル配信 / HTTPS (ACM)
+--------------------+
      |
      ▼
  +--------------------------+
  |     S3       | ← 画像ファイル・ログ保存（限定公開）
  +--------------------------+
  +-----------------------------------------------+
  |         VPC (CIDR: 10.0.0.0/16)    |
  |-----------------------------------------------|
  | Public Subnet (10.0.1.0/24)         |
  |  + EC2 NATインスタンス（t3.nano）       |
  |  + EC2 WordPress本番（t2.micro）       |
  |-----------------------------------------------|
  | Private Subnet (10.0.2.0/24)         |
  |  + RDS MySQL（db.t3.micro）          |
  |  + 検証用EC2（※基本停止）          |
  |-----------------------------------------------|
  | IGW（Internet Gateway）           |
  | NATルート（→ のちにNATインスタンスに変更）        |
  +-----------------------------------------------+
```

  ### ネットワーク基盤の構成意図

  - VPCでAWS内の独立したネットワーク空間を確保
  - パブリックサブネットはNAT Gatewayや将来のEC2配置用
  - プライベートサブネットはRDSや検証用EC2など外部非公開リソース用
  - IGWでパブリックサブネットの外部通信を実現
  - NAT Gatewayでプライベートサブネットからのインターネットアクセスを実現
  - ルートテーブルでサブネットごとに通信経路を制御

 ### セキュリティ&DB基盤の構成の意図

- **セキュリティグループ（Security Group）**
  - EC2（Webサーバー）用、RDS用、NAT Gateway用の3種類を作成し、役割ごとに通信制御を分離。
  - EC2用SGはHTTP/HTTPS/SSHのみ許可し、RDS用SGはEC2からのMySQL接続のみ許可することで、最小限のアクセス制御を実現。
  - NAT Gateway用SGはアウトバウンド通信のみ許可し、プライベートサブネットのインスタンスがインターネットへ安全にアクセスできるようにする。

- **RDS（MySQL）**
  - マネージドなDBサービスを利用し、可用性・バックアップ・スケーラビリティを確保。
  - RDSサブネットグループは2つの異なるAZ（ap-northeast-1a, 1c）に配置し、障害時の冗長性を担保。
  - DBへの直接インターネットアクセスは不可とし、セキュリティグループでEC2からのみ接続可能に制限。
